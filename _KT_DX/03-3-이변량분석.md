---
title : '03_3.ì´ë³€ëŸ‰ë¶„ì„' 
permalink: /KT_DX/03_3.ì´ë³€ëŸ‰ë¶„ì„/
excerpt : "03.ë°ì´í„° ë¶„ì„/03_3.ì´ë³€ëŸ‰ë¶„ì„"
categories : "KT_AIVLE_SCHOOL"
# tag : #"github.io"
# date : '2023-10-15'

toc : True
toc_labels: True
toc_sticky : True
---

## 03_3. ì´ë³€ëŸ‰ ë¶„ì„

## 03_3. ì´ë³€ëŸ‰ ë¶„ì„

ì´ë³€ëŸ‰ ë¶„ì„ì˜ ì¢…ë¥˜

| ì´ë³€ëŸ‰ ë¶„ì„  | ì—°ì†í˜• | ë²”ì£¼í˜• |
| --- | --- | --- |
| ì—°ì†í˜• | ì‹œê°í™” <br>&emsp; ì‚°ì ë„ (Scatter) <br> <br> í†µê³„ëŸ‰ <br>&emsp;  ìƒê´€ë¶„ì„ (Corr) | ì‹œê°í™” <br>&emsp; boxplot <br>&emsp; histogram <br>&emsp;Density plot |
| ë²”ì£¼í˜• | ì‹œê°í™” <br>&emsp; barplot <br><br> í†µê³„ëŸ‰ <br>&emsp; t-test <br>&emsp; ANOVA(f-test) | ì‹œê°í™” <br>&emsp; barplot <br>&emsp; mosaic <br> <br> í†µê³„ëŸ‰ <br>&emsp; $x^2$ (chi squared) |

- ìˆ˜ì¹˜í˜•, ë²”ì£¼í˜• ì—¬ë¶€ì— ë”°ë¼ ì´ë³€ëŸ‰ ë¶„ì„ì˜ ë°©ë²• ì°¨ì´ ì¡´ì¬

### ìˆ˜ì¹˜í˜• ìˆ˜ì¹˜í˜•

ì‚°ì ë„ (Scatter)
- x,yì¶•ì„ í†µí•´ ë‘ ìˆ˜ì¹˜í˜• ë³€ìˆ˜ì˜ ê´€ê³„ë¥¼ ë‚˜íƒ€ëƒ„
- ì§ì„ ì˜ ì •ë„ë¥¼ í†µí•´ ìƒê´€ê´€ê³„ íŒŒì•… ê°€ëŠ¥
    - ì§ì„ ì²˜ëŸ¼ ë³´ì¼ìˆ˜ë¡ ìƒê´€ê´€ê³„ê°€ ë†’ë‹¤
    - x ì¦ê°€, y ì¦ê°€ => ì–‘ì˜ ìƒê´€ê´€ê³„
    - x ê°ì†Œ, y ê°ì†Œ => ìŒì˜ ìƒê´€ê´€ê³„
    

ìƒê´€ë¶„ì„ (Correlation)
- ìƒê´€ê³„ìˆ˜ê°€ ìœ ì˜ë¯¸í•œì§€ ê²€ì •
   
ìƒê´€ê³„ìˆ˜
- x,yì˜ ê´€ê³„ë¥¼ ìˆ˜ì¹˜í™” í•œ ê²ƒ
- ê³µë¶„ì‚°ì„ xì˜ ë¶„ì‚°ê³¼ yì˜ ë¶„ì‚°ìœ¼ë¡œ ë‚˜ëˆˆ ê°’
- -1 ~ 1 ì‚¬ì´ ê°’ì„ ê°€ì§
- |1|ì— ê°€ê¹Œìš¸ ìˆ˜ë¡ ê°•í•œ ìƒê´€ê´€ê³„ë¥¼ ê°€ì§ 

<!-- $$ Corr(X,Y) = r = {Cov(x,y) \over Var(x) Var(y)} = { {\Sigma(x-\bar{x})(y-\bar{y}) \over n-1} \over \sqrt {{\Sigma(x-\bar{x})^2 \over n-1 } {\Sigma(y-\bar{y})^2 \over n-1 }}} $$ -->

- $\bar{x}$ : xì˜ í‰ê·     
- $(x-\bar{x})$ : ê° xì˜ ê°’ê³¼ x í‰ê· ì˜ ì°¨ì´ (ì˜¤ì°¨)    
- $(x-\bar{x})^2$ : ì˜¤ì°¨ì˜ ì œê³± = ì˜¤ì°¨ì˜ í¬ê¸°    


```python
import pandas as pd

data = pd.read_csv('https://raw.githubusercontent.com/juyeon-shin/ALL_STUDY/main/2023_KT_AIVLE_SCHOOL/02.%20%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EB%8B%A4%EB%93%AC%EA%B8%B0/Python02/tips.csv?token=GHSAT0AAAAAACGPM4VP3A2TGPLUISHA5WQ2ZJPSPJA')
display(data.head())
```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>16.99</td>
      <td>1.01</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10.34</td>
      <td>1.66</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>21.01</td>
      <td>3.50</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23.68</td>
      <td>3.31</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>24.59</td>
      <td>3.61</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div>



```python
# ì‚°ì ë„

import matplotlib.pyplot as plt
import seaborn as sns

plt.subplot(1,2,1)
plt.scatter(x=data['total_bill'],y=data['tip'])

plt.subplot(1,2,2)
sns.scatterplot(x=data['total_bill'],y=data['tip'],data=data)

sns.pairplot(data) # ìˆ˜ì¹˜í˜• ë³€ìˆ˜ í•œë²ˆì— ì‚°ì ë„ ê·¸ë¦¬ê¸°

plt.show()

```
    
![output_8_0](https://github.com/juyeon-shin/juyeon0008.github.io/assets/96481852/85a3ceb9-e7fc-4235-ab75-3381de57da0a)
    
    
![output_8_1](https://github.com/juyeon-shin/juyeon0008.github.io/assets/96481852/1f5b1bde-ed4d-4274-8c5f-0a75a0e5e852)
    

```python
# ìƒê´€ë¶„ì„

import scipy.stats as spst
spst.pearsonr(data['total_bill'],data['tip'])
```




    PearsonRResult(statistic=0.6757341092113645, pvalue=6.692470646863819e-34)



- statistic : ìƒê´€ê³„ìˆ˜ í†µê³„ëŸ‰
    - ë³€ìˆ˜ ê°„ ì„ í˜• ìƒê´€ê´€ê³„ ì •ë„
- p-value : ìœ ì˜í™•ë¥ 
    - ìƒê´€ê³„ìˆ˜ í†µê³„ëŸ‰ì´ ìœ ì˜í•œ ìˆ˜ì¤€
    - 0.05ë³´ë‹¤ ì‘ìœ¼ë©´ í†µê³„ëŸ‰ì´ ìœ ì˜í•¨
    
=> data['total_bill'],data['tip']ëŠ” 0.67ì˜ ìƒê´€ê´€ê³„ë¥¼ ê°€ì§€ê³ , 0ê±°ì˜ 0ì— ê°€ê¹Œìš´ (ìœ ì˜ìˆ˜ì¤€ 0.05ë³´ë‹¤ ì‘ë‹¤) ìœ ì˜í™•ë¥ ì„ ê°€ì ¸, ìƒê´€ê³„ìˆ˜ í†µê³„ëŸ‰ì´ ìœ ì˜í•˜ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤


```python
data.corr()
```

    C:\Users\juyeo\AppData\Local\Temp\ipykernel_25956\2627137660.py:1: FutureWarning: The default value of numeric_only in DataFrame.corr is deprecated. In a future version, it will default to False. Select only valid columns or specify the value of numeric_only to silence this warning.
      data.corr()
    




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>total_bill</th>
      <td>1.000000</td>
      <td>0.675734</td>
      <td>0.598315</td>
    </tr>
    <tr>
      <th>tip</th>
      <td>0.675734</td>
      <td>1.000000</td>
      <td>0.489299</td>
    </tr>
    <tr>
      <th>size</th>
      <td>0.598315</td>
      <td>0.489299</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div>



dataì˜ ìˆ˜ì¹˜í˜• ë³€ìˆ˜ë“¤ì˜ ìƒê´€ê´€ê³„ë¥¼ í•œ ë²ˆì— ë³¼ ìˆ˜ ìˆë‹¤

### ë²”ì£¼í˜• ìˆ˜ì¹˜í˜•

í‰ê·  ë¹„êµ
- ë²”ì£¼ê°€ 2ê°œ : ë‘ í‰ê· ì˜ ì°¨ì´ ë¹„êµ
- ë²”ì£¼ê°€ 3ê°œ ì´ìƒ : ì „ì²´ í‰ê· ê³¼ ê° ë²”ì£¼ì˜ í‰ê·  ë¹„êµ


```python
# ê·€ë¬´ ê°€ì„¤ : í¡ì—° ì—¬ë¶€ì— ë”°ë¥¸ íŒ ê¸ˆì•¡ ì°¨ì´ëŠ” ì—†ë‹¤
# ëŒ€ë¦½ ê°€ì„¤ : í¡ì—° ì—¬ë¶€ì— ë”°ë¼ íŒ ê¸ˆì•¡ ì°¨ì´ê°€ ìˆë‹¤

sns.barplot(data=data,x=data['smoker'],y=data['tip'])
plt.show()
```

![output_15_0](https://github.com/juyeon-shin/juyeon0008.github.io/assets/96481852/3c2ec6b5-eec0-463a-beca-1bffe87618fe)

```python
# ê·€ë¬´ ê°€ì„¤ : ìš”ì¼ì— ë”°ë¥¸ íŒ ê¸ˆì•¡ ì°¨ì´ëŠ” ì—†ë‹¤
# ëŒ€ë¦½ ê°€ì„¤ : ìš”ì¼ì— ë”°ë¼ íŒ ê¸ˆì•¡ ì°¨ì´ê°€ ìˆë‹¤

sns.barplot(data=data,x=data['day'],y=data['tip'])
plt.show()
```

![output_16_0](https://github.com/juyeon-shin/juyeon0008.github.io/assets/96481852/9d796ac9-bf2a-4eb2-b5ce-e68dd4be27f3)

t-test
- ë‘ ê·¸ë£¹ê°„ ì°¨ì´ ê²€ì •
- ë‘ ê·¸ë£¹ì˜ í‰ê· ì˜ ì°¨ì´ ê²€ì •


```python
import scipy.stats as spst

yes = data[data['smoker'] == 'Yes']
no = data[data['smoker'] == 'No']

display(yes.head())
display(no.head())

spst.ttest_ind(yes['tip'],no['tip'])
```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>56</th>
      <td>38.01</td>
      <td>3.00</td>
      <td>Male</td>
      <td>Yes</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>4</td>
    </tr>
    <tr>
      <th>58</th>
      <td>11.24</td>
      <td>1.76</td>
      <td>Male</td>
      <td>Yes</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>60</th>
      <td>20.29</td>
      <td>3.21</td>
      <td>Male</td>
      <td>Yes</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>61</th>
      <td>13.81</td>
      <td>2.00</td>
      <td>Male</td>
      <td>Yes</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>62</th>
      <td>11.02</td>
      <td>1.98</td>
      <td>Male</td>
      <td>Yes</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>16.99</td>
      <td>1.01</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10.34</td>
      <td>1.66</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>21.01</td>
      <td>3.50</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>3</th>
      <td>23.68</td>
      <td>3.31</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>24.59</td>
      <td>3.61</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div>





    Ttest_indResult(statistic=0.09222805186888201, pvalue=0.9265931522244976)



- statistic : T í†µê³„ëŸ‰
    - ë‘ ê·¸ë£¹ ê°„ 
- p-value : ìœ ì˜í™•ë¥ 
    - T í†µê³„ëŸ‰ì´ ìœ ì˜í•œ ìˆ˜ì¤€
    - 0.05ë³´ë‹¤ ì‘ìœ¼ë©´ í†µê³„ëŸ‰ì´ ìœ ì˜í•¨

=> T í†µê³„ëŸ‰ì´ 0.09ë¡œ ì‘ê³ , p-valueê°€ 0.05ë³´ë‹¤ í¬ë¯€ë¡œ í¡ì—° ì—¬ë¶€ê°„ íŒ ê¸ˆì•¡ì˜ ì°¨ì´ëŠ” ì¡´ì¬í•œë‹¤ê³  ë³´ê¸° ì–´ë µë‹¤

ANOVA
- ì„¸ ê°œ ì´ìƒ ê·¸ë£¹ê°„ì˜ ì°¨ì´ ê²€ì •
- ì „ì²´ í‰ê· ê³¼ ê° ê·¸ë£¹ì˜ í‰ê· ì´ ì°¨ì´ê°€ ìˆëŠ”ê°€ë¥¼ ê²€ì •

<img width="800" alt="ë‹¤ìš´ë¡œë“œ (1)" src="https://github.com/juyeon-shin/juyeon0008.github.io/assets/96481852/8e170b37-1cc4-450c-bcd4-afc76608719b">


$$ SST = SSR + SSE $$

- SST : ì „ì²´ ë¶„ì‚°
- SSR (treatment) : ì§‘ë‹¨ ê°„ ë¶„ì‚°
- SSE : ì§‘ë‹¨ ë‚´ ë¶„ì‚°

<img width="800" alt="ë‹¤ìš´ë¡œë“œ (2)" src="https://github.com/juyeon-shin/juyeon0008.github.io/assets/96481852/45989604-65e8-4f31-8f22-cae8b7883d46">

- ì¶œì²˜ : wikipidia one-way ANOVA


```python
import scipy.stats as spst

sun = data[data['day'] == 'Sun']
sat = data[data['day'] == 'Sat']
fri = data[data['day'] == 'Fri']
thu = data[data['day'] == 'Thur']

display(sun.head(3))
display(sat.head(3))
display(fri.head(3))
display(thu.head(3))

spst.f_oneway(sun['tip'],sat['tip'],fri['tip'],thu['tip'])
```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>16.99</td>
      <td>1.01</td>
      <td>Female</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10.34</td>
      <td>1.66</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>2</th>
      <td>21.01</td>
      <td>3.50</td>
      <td>Male</td>
      <td>No</td>
      <td>Sun</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>19</th>
      <td>20.65</td>
      <td>3.35</td>
      <td>Male</td>
      <td>No</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>3</td>
    </tr>
    <tr>
      <th>20</th>
      <td>17.92</td>
      <td>4.08</td>
      <td>Male</td>
      <td>No</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>21</th>
      <td>20.29</td>
      <td>2.75</td>
      <td>Female</td>
      <td>No</td>
      <td>Sat</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>90</th>
      <td>28.97</td>
      <td>3.0</td>
      <td>Male</td>
      <td>Yes</td>
      <td>Fri</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>91</th>
      <td>22.49</td>
      <td>3.5</td>
      <td>Male</td>
      <td>No</td>
      <td>Fri</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
    <tr>
      <th>92</th>
      <td>5.75</td>
      <td>1.0</td>
      <td>Female</td>
      <td>Yes</td>
      <td>Fri</td>
      <td>Dinner</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>total_bill</th>
      <th>tip</th>
      <th>sex</th>
      <th>smoker</th>
      <th>day</th>
      <th>time</th>
      <th>size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>77</th>
      <td>27.20</td>
      <td>4.00</td>
      <td>Male</td>
      <td>No</td>
      <td>Thur</td>
      <td>Lunch</td>
      <td>4</td>
    </tr>
    <tr>
      <th>78</th>
      <td>22.76</td>
      <td>3.00</td>
      <td>Male</td>
      <td>No</td>
      <td>Thur</td>
      <td>Lunch</td>
      <td>2</td>
    </tr>
    <tr>
      <th>79</th>
      <td>17.29</td>
      <td>2.71</td>
      <td>Male</td>
      <td>No</td>
      <td>Thur</td>
      <td>Lunch</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>





    F_onewayResult(statistic=1.6723551980998697, pvalue=0.1735885553040592)



- statistic : F í†µê³„ëŸ‰
    - ê° ê·¸ë£¹ì˜ ë¶„ì‚°ì— ëŒ€í•œ í†µê³„ëŸ‰
- p-value : ìœ ì˜í™•ë¥ 
    - F í†µê³„ëŸ‰ì´ ìœ ì˜í•œ ìˆ˜ì¤€
    - 0.05ë³´ë‹¤ ì‘ìœ¼ë©´ í†µê³„ëŸ‰ì´ ìœ ì˜í•¨
    
=> F í†µê³„ëŸ‰ì´ 1.6ì´ê³  p-valueëŠ” 0.17ìœ¼ë¡œ 0.05ë³´ë‹¤ ì‘ì§€ ì•Šë‹¤
=> ìš”ì¼ì— ë”°ë¥¸ íŒ ê¸ˆì•¡ì˜ ì°¨ì´ê°€ ì¡´ì¬í•œë‹¤ê³  ë³´ê¸° ì–´ë µë‹¤

### ë²”ì£¼í˜• ë²”ì£¼í˜•



êµì°¨í‘œ

- ë‘ ìœ í˜•ì˜ ë²”ì£¼ë¡œ ë‚˜ëˆ ì„œ í•´ë‹¹í•˜ëŠ” ë°ì´í„° ìˆ˜ ì¹´ìš´íŠ¸
- êµì°¨í‘œë¡œë¶€í„° ëª¨ìì´í¬ í”Œë¡¯, ì¹´ì´ì œê³± ê²€ì • í™œìš© ê°€ëŠ¥

| êµì°¨í‘œ |  |
| --- | --- |
| pd.crosstab(<br>&emsp; í–‰ì— ë„£ì„ ë²”ì£¼, <br>&emsp; ì—´ì— ë„£ì„ ë²”ì£¼,<br>&emsp; normalize) | normalize : ë¹„ìœ¨ë¡œ ë³€í™˜ <br>&emsp; columns : ì—´ ê¸°ì¤€ 100% <br>&emsp; index : í–‰ ê¸°ì¤€ 100% <br>&emsp; all : ì „ì²´ ê¸°ì¤€ 100% |



```python
import pandas as pd

display(pd.crosstab(data['smoker'],data['time']))
display(pd.crosstab(data['smoker'],data['time'],normalize='all'))
display(pd.crosstab(data['smoker'],data['time'],normalize='index'))
display(pd.crosstab(data['smoker'],data['time'],normalize='columns'))
```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>time</th>
      <th>Dinner</th>
      <th>Lunch</th>
    </tr>
    <tr>
      <th>smoker</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>No</th>
      <td>106</td>
      <td>45</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>70</td>
      <td>23</td>
    </tr>
  </tbody>
</table>
</div>



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>time</th>
      <th>Dinner</th>
      <th>Lunch</th>
    </tr>
    <tr>
      <th>smoker</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>No</th>
      <td>0.434426</td>
      <td>0.184426</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>0.286885</td>
      <td>0.094262</td>
    </tr>
  </tbody>
</table>
</div>



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>time</th>
      <th>Dinner</th>
      <th>Lunch</th>
    </tr>
    <tr>
      <th>smoker</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>No</th>
      <td>0.701987</td>
      <td>0.298013</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>0.752688</td>
      <td>0.247312</td>
    </tr>
  </tbody>
</table>
</div>



<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>time</th>
      <th>Dinner</th>
      <th>Lunch</th>
    </tr>
    <tr>
      <th>smoker</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>No</th>
      <td>0.602273</td>
      <td>0.661765</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>0.397727</td>
      <td>0.338235</td>
    </tr>
  </tbody>
</table>
</div>


mosaic
- ë‚´ë¶€ì—ì„œ êµì°¨í‘œë¥¼ ë§Œë“¤ì–´ ëª¨ìì´í¬ í”Œë¡¯ìœ¼ë¡œ ë‚˜íƒ€ëƒ„
- ë‘ ë²”ì£¼í˜• ë³€ìˆ˜ê°€ ì•„ë¬´ ìƒê´€ì´ ì—†ë‹¤ë©´ ë²”ì£¼ë³„ ì°¨ì´ X
- ê´€ë ¨ì´ ìˆë‹¤ë©´ ë§‰ëŒ€ì˜ í¬ê¸° ì°¨ì´ O
- xì¶•ì€ xì˜ ë¹„ìœ¨, yì¶•ì€ ë²”ì£¼ë³„ë¡œ ë”°ë¡œ íŒŒì•…
- ê·€ë¬´ê°€ì„¤ì´ ì°¸ì´ë©´ ì „ì²´ í‰ê·  ë¹„ìœ¨ì´ ê°™ë‹¤



```python
from statsmodels.graphics.mosaicplot import mosaic

mosaic(data,['smoker','time'])
plt.show()
```

![output_27_0](https://github.com/juyeon-shin/juyeon0008.github.io/assets/96481852/3233afbe-ee0f-41ff-8797-12b4be3d3771)
    

ğ‘¥2 (chi squared) : ì¹´ì´ì œê³±ê²€ì •

- ë²”ì£¼í˜• ë³€ìˆ˜ë¼ë¦¬ì˜ ê´€ë ¨ì„± ê²€ì •
- ê¸°ëŒ€ë¹ˆë„ì™€ ê´€ì¸¡ë¹ˆë„ì˜ ì°¨ì´
- í†µê³„ëŸ‰ì´ í´ ìˆ˜ë¡ ê¸°ëŒ€ë¹ˆë„ë¡œë¶€í„° ì‹¤ì œ ê°’ì— ì°¨ì´ê°€ í¬ë‹¤ëŠ” ì˜ë¯¸
    - ë²”ì£¼í˜• ë³€ìˆ˜ë“¤ ì‚¬ì´ì— ê´€ë ¨ì´ ìˆë‹¤
    - ê·€ë¬´ê°€ì„¤ì„ ê¸°ê°í•  í™•ë¥ ì´ ë†’ì•„ì§
- ë²”ì£¼ ìˆ˜ê°€ ëŠ˜ì–´ë‚  ìˆ˜ë¡ í†µê³„ëŸ‰ì´ ì»¤ì§„ë‹¤
- ììœ ë„ì˜ ì•½ 2ë°°ë³´ë‹¤ í¬ë©´, ì°¨ì´ê°€ ìˆë‹¤ê³  ì¶”ì¸¡
- pd.crosstab() ìœ¼ë¡œ ì§‘ê³„í•œ ë’¤ í•¨ìˆ˜ì— ëŒ€ì…
    - normalize ì˜µì…˜ ì‚¬ìš© X


| ìš©ì–´ | ì„¤ëª… |
| --- | --- |
| ê¸°ëŒ€ë¹ˆë„ | ì•„ë¬´ëŸ° ê´€ë ¨ì´ ì—†ì„ ë•Œ ë‚˜ì˜¬ ìˆ˜ ìˆëŠ” ë¹ˆë„ ìˆ˜ |
| ê´€ì¸¡ë¹ˆë„ | ì‹¤ì œë¡œ ê´€ì¸¡ëœ ê°’ë“¤ |
| ììœ ë„ | ë²”ì£¼ì˜ ìˆ˜ -1 <br>&emsp; (xë³€ìˆ˜ ë²”ì£¼ -1) * (yë³€ìˆ˜ ë²”ì£¼ -1)|

$$ \chi^2 = \sum{ { (ê´€ì¸¡ë¹ˆë„ - ê¸°ëŒ€ë¹ˆë„)^2\over ê¸°ëŒ€ë¹ˆë„}} $$ 


```python
table = pd.crosstab(data['smoker'],data['time'])
display(table)

spst.chi2_contingency(table)
```


<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>time</th>
      <th>Dinner</th>
      <th>Lunch</th>
    </tr>
    <tr>
      <th>smoker</th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>No</th>
      <td>106</td>
      <td>45</td>
    </tr>
    <tr>
      <th>Yes</th>
      <td>70</td>
      <td>23</td>
    </tr>
  </tbody>
</table>
</div>





    Chi2ContingencyResult(statistic=0.5053733928754354, pvalue=0.4771485672079724, dof=1, expected_freq=array([[108.91803279,  42.08196721],
           [ 67.08196721,  25.91803279]]))



- ì¹´ì´ì œê³± í†µê³„ëŸ‰ = 0.5, p-value = 0.4ë¡œ í¡ì—°ì—¬ë¶€ì™€ ìš´ì˜íƒ€ì„ì€ ê´€ë ¨ì´ ì—†ë‹¤


### ìˆ˜ì¹˜í˜• ë²”ì£¼í˜•

kde plot or histogram
- ë²”ì£¼ë³„ ë¶„í¬ or ë¹„ìœ¨ë¡œ ë¹„êµí•˜ëŠ” ê·¸ë˜í”„

| kde plot |  |
| --- | --- |
| sns.kdeplot(<br>&emsp; x, <br>&emsp; data, <br>&emsp; hue,<br>&emsp; multiple, <br>&emsp; common_norm ) | kde plot <br>&emsp; xì¶•, <br>&emsp; data, <br>&emsp; êµ¬ë¶„í•  ê¸°ì¤€ (ë²”ì£¼), <br>&emsp; ëª¨ë“  êµ¬ê°„ì— ëŒ€í•œ ë¹„ìœ¨ ì—¬ë¶€, <br>&emsp; False : ë²”ì£¼ë³„ë¡œ ê·¸ë˜í”„ ë”°ë¡œ ê·¸ë¦¬ê¸°|


```python
plt.figure(figsize=(10,4))
plt.subplot(1,2,1)
sns.kdeplot(x='tip',data=data,hue='smoker',multiple='fill')
plt.axhline(data['tip'].mean(), color='r')

plt.subplot(1,2,2)
sns.kdeplot(x='tip',data=data,hue='smoker')
plt.axhline(data['tip'].mean(), color='r')
plt.show()
```
![output_34_0](https://github.com/juyeon-shin/juyeon0008.github.io/assets/96481852/714f134f-7e53-40d9-8670-973a3106152a)

- í‰ê· ì„ ê³¼ multiple='fill' ì´ ê²¹ì¹˜ëŠ” ë¶€ë¶„ = ì „ì²´ í‰ê· ê³¼ ê°™ì€ ì§€ì 
- yì¶•ì´ ë¹„ìœ¨ì„ ë‚˜íƒ€ëƒ„


```python
plt.figure(figsize=(10,4))
plt.subplot(1,2,1)
sns.kdeplot(x='tip',data=data,hue='smoker',common_norm=False)
plt.axhline(data['tip'].mean(), color='r')

plt.subplot(1,2,2)
sns.kdeplot(x='tip',data=data,hue='smoker')
plt.axhline(data['tip'].mean(), color='r')
plt.show()
```

![output_36_0](https://github.com/juyeon-shin/juyeon0008.github.io/assets/96481852/b069598b-e0a1-43a4-98d5-40887be6b61c)

- ê·¸ë˜í”„ì˜ ëª¨ì–‘ì´ ì™„ì „íˆ ê²¹ì¹˜ë©´
    - ì°¨ì´ê°€ ì „í˜€ ì—†ë‹¤ (ë‘ ë³€ìˆ˜ê°„ì— ê´€ë ¨ì´ ì—†ë‹¤)
- ê·¸ë˜í”„ì˜ ëª¨ì–‘ì´ ë²Œì–´ì§€ë©´
    - ë²Œì–´ì§„ ë§Œí¼ì˜ ì°¨ì´ê°€ ì¡´ì¬í•œë‹¤ (ë‘ ë³€ìˆ˜ê°„ì— ê´€ë ¨ì´ ì¡´ì¬í•œë‹¤)
    
- ì–‘ì„ ê°€ëŠ í•´ ë³¼ ìˆ˜ ìˆë‹¤
- y ì¶•ì€ ë°€ë„ë¥¼ ë‚˜íƒ€ëƒ„


```python
plt.figure(figsize=(10,4))
plt.subplot(1,2,1)
sns.kdeplot(x='tip',data=data,hue='smoker',common_norm=False)
plt.axhline(data['tip'].mean(), color='r')

plt.subplot(1,2,2)
sns.kdeplot(x='tip',data=data,hue='smoker',multiple='fill')
plt.axhline(data['tip'].mean(), color='r')

plt.show()
```

![output_38_0](https://github.com/juyeon-shin/juyeon0008.github.io/assets/96481852/ef1fd76a-105d-48ca-b91b-98d258e94009)

